# InstallNugetPackage.yml
# 
# Description:
#   This template installs a NuGet package and moves it to a specified source folder.
#   It supports installing either the latest version or a specific version of a package.

parameters:
- name: packageName
  type: string
  default: 'VSEng.PI'
- name: pkgVersion
  type: string
  default: ' '
- name: sourceFolder
  type: string
  default: $(Build.SourcesDirectory)\src

steps:
- pwsh: |
    Write-Host ("pkgVersion is: ${{ parameters.pkgVersion }}")
    if ("${{ parameters.pkgVersion }}" -eq " ") {
      Write-Host "This is a space"
    } elseif ("${{ parameters.pkgVersion }}" -eq "") {
      Write-Host "This is an empty string"
    } else {
      Write-Host "This is: ${{ parameters.pkgVersion }}"
    }
- ${{ if eq(parameters.pkgVersion, ' ') }}:
  - pwsh: |
      Write-Host "1Installing latest version of package: ${{ parameters.packageName }}"
    continueOnError: true
- ${{ else }}:
  - pwsh: |
      Write-Host "1Installing specific version of package: ${{ parameters.packageName }}. Version: ${{ parameters.pkgVersion }}"
    continueOnError: true
- ${{ if eq(parameters.pkgVersion, '') }}:
  - pwsh: |
      Write-Host "2Installing latest version of package: ${{ parameters.packageName }}"
    continueOnError: true
- ${{ else }}:
  - pwsh: |
      Write-Host "2Installing specific version of package: ${{ parameters.packageName }}. Version: ${{ parameters.pkgVersion }}"
    continueOnError: true