# InstallNugetPackage.yml
# 
# Description:
#   This template installs a NuGet package and moves it to a specified source folder.
#   It supports installing either the latest version or a specific version of a package.

parameters:
  packageName: 'VSEng.PI'
  pkgVersion: ''
  sourceFolder: $(Build.SourcesDirectory)\src

steps:
- pwsh: |
    Write-Host ("pkgVersion is: ${{ parameters.pkgVersion }}")
    if ("${{ parameters.pkgVersion }}" -eq " ") {
      Write-Host "This is a space"
    } elseif ("${{ parameters.pkgVersion }}" -eq "") {
      Write-Host "This is an empty string"
    } else {
      Write-Host "This is: ${{ parameters.pkgVersion }}"
    }
  displayName: 'Debug pkgVersion'
- ${{ if eq(parameters.pkgVersion, ' ') }}:
  - pwsh: |
      Write-Host "1Installing latest version of package: ${{ parameters.packageName }}"
    displayName: 'qInstall NuGet Package - Latest Version'
    continueOnError: true
- ${{ else }}:
  - pwsh: |
      Write-Host "1Installing specific version of package: ${{ parameters.packageName }}. Version: '${{ parameters.pkgVersion }}'"
    displayName: '1Install NuGet Package - Specific Version'
    continueOnError: true
- ${{ if eq(parameters.pkgVersion, '') }}:
  - pwsh: |
      Write-Host "2Installing latest version of package: ${{ parameters.packageName }}"
    displayName: '2Install NuGet Package - Latest Version'
    continueOnError: true
- ${{ else }}:
  - pwsh: |
      Write-Host "2Installing specific version of package: ${{ parameters.packageName }}. Version: '${{ parameters.pkgVersion }}'"
    displayName: '2Install NuGet Package - Specific Version'
    continueOnError: true